import{$ as c,D as k,h as w,s as P}from"./hyphenate-10dbe64e.js";/*! Responsive 2.4.1
 * © SpryMedia Ltd - datatables.net/license
 */var L=function(t,e){if(!k.versionCheck||!k.versionCheck("1.10.10"))throw"DataTables Responsive requires DataTables 1.10.10 or newer";this.s={childNodeStore:{},columns:[],current:[],dt:new k.Api(t)},!this.s.dt.settings()[0].responsive&&(e&&typeof e.details=="string"?e.details={type:e.details}:e&&e.details===!1?e.details={type:!1}:e&&e.details===!0&&(e.details={type:"inline"}),this.c=c.extend(!0,{},L.defaults,k.defaults.responsive,e),t.responsive=this,this._constructor())};c.extend(L.prototype,{_constructor:function(){var t=this,e=this.s.dt,i=e.settings()[0],s=c(window).innerWidth();e.settings()[0]._responsive=this,c(window).on("resize.dtr orientationchange.dtr",k.util.throttle(function(){var l=c(window).innerWidth();l!==s&&(t._resize(),s=l)})),i.oApi._fnCallbackReg(i,"aoRowCreatedCallback",function(l,r,a){c.inArray(!1,t.s.current)!==-1&&c(">td, >th",l).each(function(o){var h=e.column.index("toData",o);t.s.current[h]===!1&&c(this).css("display","none")})}),e.on("destroy.dtr",function(){e.off(".dtr"),c(e.table().body()).off(".dtr"),c(window).off("resize.dtr orientationchange.dtr"),e.cells(".dtr-control").nodes().to$().removeClass("dtr-control"),c.each(t.s.current,function(l,r){r===!1&&t._setColumnVis(l,!0)})}),this.c.breakpoints.sort(function(l,r){return l.width<r.width?1:l.width>r.width?-1:0}),this._classLogic(),this._resizeAuto();var n=this.c.details;n.type!==!1&&(t._detailsInit(),e.on("column-visibility.dtr",function(){t._timer&&clearTimeout(t._timer),t._timer=setTimeout(function(){t._timer=null,t._classLogic(),t._resizeAuto(),t._resize(!0),t._redrawChildren()},100)}),e.on("draw.dtr",function(){t._redrawChildren()}),c(e.table().node()).addClass("dtr-"+n.type)),e.on("column-reorder.dtr",function(l,r,a){t._classLogic(),t._resizeAuto(),t._resize(!0)}),e.on("column-sizing.dtr",function(){t._resizeAuto(),t._resize()}),e.on("column-calc.dt",function(l,r){for(var a=t.s.current,o=0;o<a.length;o++){var h=r.visible.indexOf(o);a[o]===!1&&h>=0&&r.visible.splice(h,1)}}),e.on("preXhr.dtr",function(){var l=[];e.rows().every(function(){this.child.isShown()&&l.push(this.id(!0))}),e.one("draw.dtr",function(){t._resizeAuto(),t._resize(),e.rows(l).every(function(){t._detailsDisplay(this,!1)})})}),e.on("draw.dtr",function(){t._controlClass()}).on("init.dtr",function(l,r,a){l.namespace==="dt"&&(t._resizeAuto(),t._resize(),c.inArray(!1,t.s.current)&&e.columns.adjust())}),this._resize()},_childNodes:function(t,e,i){var s=e+"-"+i;if(this.s.childNodeStore[s])return this.s.childNodeStore[s];for(var n=[],l=t.cell(e,i).node().childNodes,r=0,a=l.length;r<a;r++)n.push(l[r]);return this.s.childNodeStore[s]=n,n},_childNodesRestore:function(t,e,i){var s=e+"-"+i;if(this.s.childNodeStore[s]){for(var n=t.cell(e,i).node(),l=this.s.childNodeStore[s],r=l[0].parentNode,a=r.childNodes,o=[],h=0,p=a.length;h<p;h++)o.push(a[h]);for(var u=0,y=o.length;u<y;u++)n.appendChild(o[u]);this.s.childNodeStore[s]=void 0}},_columnsVisiblity:function(t){var e=this.s.dt,i=this.s.columns,s,n,l=i.map(function(m,f){return{columnIdx:f,priority:m.priority}}).sort(function(m,f){return m.priority!==f.priority?m.priority-f.priority:m.columnIdx-f.columnIdx}),r=c.map(i,function(m,f){return e.column(f).visible()===!1?"not-visible":m.auto&&m.minWidth===null?!1:m.auto===!0?"-":c.inArray(t,m.includeIn)!==-1}),a=0;for(s=0,n=r.length;s<n;s++)r[s]===!0&&(a+=i[s].minWidth);var o=e.settings()[0].oScroll,h=o.sY||o.sX?o.iBarWidth:0,p=e.table().container().offsetWidth-h,u=p-a;for(s=0,n=r.length;s<n;s++)i[s].control&&(u-=i[s].minWidth);var y=!1;for(s=0,n=l.length;s<n;s++){var d=l[s].columnIdx;r[d]==="-"&&!i[d].control&&i[d].minWidth&&(y||u-i[d].minWidth<0?(y=!0,r[d]=!1):r[d]=!0,u-=i[d].minWidth)}var A=!1;for(s=0,n=i.length;s<n;s++)if(!i[s].control&&!i[s].never&&r[s]===!1){A=!0;break}for(s=0,n=i.length;s<n;s++)i[s].control&&(r[s]=A),r[s]==="not-visible"&&(r[s]=!1);return c.inArray(!0,r)===-1&&(r[0]=!0),r},_classLogic:function(){var t=this,e=this.c.breakpoints,i=this.s.dt,s=i.columns().eq(0).map(function(r){var a=this.column(r),o=a.header().className,h=i.settings()[0].aoColumns[r].responsivePriority,p=a.header().getAttribute("data-priority");return h===void 0&&(h=p==null?1e4:p*1),{className:o,includeIn:[],auto:!1,control:!1,never:!!o.match(/\b(dtr\-)?never\b/),priority:h}}),n=function(r,a){var o=s[r].includeIn;c.inArray(a,o)===-1&&o.push(a)},l=function(r,a,o,h){var p,u,y;if(!o)s[r].includeIn.push(a);else if(o==="max-")for(p=t._find(a).width,u=0,y=e.length;u<y;u++)e[u].width<=p&&n(r,e[u].name);else if(o==="min-")for(p=t._find(a).width,u=0,y=e.length;u<y;u++)e[u].width>=p&&n(r,e[u].name);else if(o==="not-")for(u=0,y=e.length;u<y;u++)e[u].name.indexOf(h)===-1&&n(r,e[u].name)};s.each(function(r,a){for(var o=r.className.split(" "),h=!1,p=0,u=o.length;p<u;p++){var y=o[p].trim();if(y==="all"||y==="dtr-all"){h=!0,r.includeIn=c.map(e,function(d){return d.name});return}else if(y==="none"||y==="dtr-none"||r.never){h=!0;return}else if(y==="control"||y==="dtr-control"){h=!0,r.control=!0;return}c.each(e,function(d,A){var m=A.name.split("-"),f=new RegExp("(min\\-|max\\-|not\\-)?("+m[0]+")(\\-[_a-zA-Z0-9])?"),g=y.match(f);g&&(h=!0,g[2]===m[0]&&g[3]==="-"+m[1]?l(a,A.name,g[1],g[2]+g[3]):g[2]===m[0]&&!g[3]&&l(a,A.name,g[1],g[2]))})}h||(r.auto=!0)}),this.s.columns=s},_controlClass:function(){if(this.c.details.type==="inline"){var t=this.s.dt,e=this.s.current,i=c.inArray(!0,e);t.cells(null,function(s){return s!==i},{page:"current"}).nodes().to$().filter(".dtr-control").removeClass("dtr-control"),t.cells(null,i,{page:"current"}).nodes().to$().addClass("dtr-control")}},_detailsDisplay:function(t,e){var i=this,s=this.s.dt,n=this.c.details;if(n&&n.type!==!1){var l=typeof n.renderer=="string"?L.renderer[n.renderer]():n.renderer,r=n.display(t,e,function(){return l.call(i,s,t[0],i._detailsObj(t[0]))});(r===!0||r===!1)&&c(s.table().node()).triggerHandler("responsive-display.dt",[s,t,r,e])}},_detailsInit:function(){var t=this,e=this.s.dt,i=this.c.details;i.type==="inline"&&(i.target="td.dtr-control, th.dtr-control"),e.on("draw.dtr",function(){t._tabIndexes()}),t._tabIndexes(),c(e.table().body()).on("keyup.dtr","td, th",function(l){l.keyCode===13&&c(this).data("dtr-keyboard")&&c(this).click()});var s=i.target,n=typeof s=="string"?s:"td, th";(s!==void 0||s!==null)&&c(e.table().body()).on("click.dtr mousedown.dtr mouseup.dtr",n,function(l){if(c(e.table().node()).hasClass("collapsed")&&c.inArray(c(this).closest("tr").get(0),e.rows().nodes().toArray())!==-1){if(typeof s=="number"){var r=s<0?e.columns().eq(0).length+s:s;if(e.cell(this).index().column!==r)return}var a=e.row(c(this).closest("tr"));l.type==="click"?t._detailsDisplay(a,!1):l.type==="mousedown"?c(this).css("outline","none"):l.type==="mouseup"&&c(this).trigger("blur").css("outline","")}})},_detailsObj:function(t){var e=this,i=this.s.dt;return c.map(this.s.columns,function(s,n){if(!(s.never||s.control)){var l=i.settings()[0].aoColumns[n];return{className:l.sClass,columnIndex:n,data:i.cell(t,n).render(e.c.orthogonal),hidden:i.column(n).visible()&&!e.s.current[n],rowIndex:t,title:l.sTitle!==null?l.sTitle:c(i.column(n).header()).text()}}})},_find:function(t){for(var e=this.c.breakpoints,i=0,s=e.length;i<s;i++)if(e[i].name===t)return e[i]},_redrawChildren:function(){var t=this,e=this.s.dt;e.rows({page:"current"}).iterator("row",function(i,s){e.row(s),t._detailsDisplay(e.row(s),!0)})},_resize:function(t){var e=this,i=this.s.dt,s=c(window).innerWidth(),n=this.c.breakpoints,l=n[0].name,r=this.s.columns,a,o,h=this.s.current.slice();for(a=n.length-1;a>=0;a--)if(s<=n[a].width){l=n[a].name;break}var p=this._columnsVisiblity(l);this.s.current=p;var u=!1;for(a=0,o=r.length;a<o;a++)if(p[a]===!1&&!r[a].never&&!r[a].control&&i.column(a).visible()){u=!0;break}c(i.table().node()).toggleClass("collapsed",u);var y=!1,d=0;i.columns().eq(0).each(function(A,m){p[m]===!0&&d++,(t||p[m]!==h[m])&&(y=!0,e._setColumnVis(A,p[m]))}),this._redrawChildren(),y&&(c(i.table().node()).trigger("responsive-resize.dt",[i,this.s.current]),i.page.info().recordsDisplay===0&&c("td",i.table().body()).eq(0).attr("colspan",d)),e._controlClass()},_resizeAuto:function(){var t=this.s.dt,e=this.s.columns,i=this;if(this.c.auto&&c.inArray(!0,c.map(e,function(u){return u.auto}))!==-1){c.isEmptyObject(this.s.childNodeStore)||c.each(this.s.childNodeStore,function(u){var y=u.split("-");i._childNodesRestore(t,y[0]*1,y[1]*1)}),t.table().node().offsetWidth,t.columns;var s=t.table().node().cloneNode(!1),n=c(t.table().header().cloneNode(!1)).appendTo(s),l=c(t.table().body()).clone(!1,!1).empty().appendTo(s);s.style.width="auto";var r=t.columns().header().filter(function(u){return t.column(u).visible()}).to$().clone(!1).css("display","table-cell").css("width","auto").css("min-width",0);c(l).append(c(t.rows({page:"current"}).nodes()).clone(!1)).find("th, td").css("display","");var a=t.table().footer();if(a){var o=c(a.cloneNode(!1)).appendTo(s),h=t.columns().footer().filter(function(u){return t.column(u).visible()}).to$().clone(!1).css("display","table-cell");c("<tr/>").append(h).appendTo(o)}c("<tr/>").append(r).appendTo(n),this.c.details.type==="inline"&&c(s).addClass("dtr-inline collapsed"),c(s).find("[name]").removeAttr("name"),c(s).css("position","relative");var p=c("<div/>").css({width:1,height:1,overflow:"hidden",clear:"both"}).append(s);p.insertBefore(t.table().node()),r.each(function(u){var y=t.column.index("fromVisible",u);e[y].minWidth=this.offsetWidth||0}),p.remove()}},_responsiveOnlyHidden:function(){var t=this.s.dt;return c.map(this.s.current,function(e,i){return t.column(i).visible()===!1?!0:e})},_setColumnVis:function(t,e){var i=this,s=this.s.dt,n=e?"":"none";c(s.column(t).header()).css("display",n).toggleClass("dtr-hidden",!e),c(s.column(t).footer()).css("display",n).toggleClass("dtr-hidden",!e),s.column(t).nodes().to$().css("display",n).toggleClass("dtr-hidden",!e),c.isEmptyObject(this.s.childNodeStore)||s.cells(null,t).indexes().each(function(l){i._childNodesRestore(s,l.row,l.column)})},_tabIndexes:function(){var t=this.s.dt,e=t.cells({page:"current"}).nodes().to$(),i=t.settings()[0],s=this.c.details.target;e.filter("[data-dtr-keyboard]").removeData("[data-dtr-keyboard]"),typeof s=="number"?t.cells(null,s,{page:"current"}).nodes().to$().attr("tabIndex",i.iTabIndex).data("dtr-keyboard",1):(s==="td:first-child, th:first-child"&&(s=">td:first-child, >th:first-child"),c(s,t.rows({page:"current"}).nodes()).attr("tabIndex",i.iTabIndex).data("dtr-keyboard",1))}});L.breakpoints=[{name:"desktop",width:1/0},{name:"tablet-l",width:1024},{name:"tablet-p",width:768},{name:"mobile-l",width:480},{name:"mobile-p",width:320}];L.display={childRow:function(t,e,i){if(e){if(c(t.node()).hasClass("parent"))return t.child(i(),"child").show(),!0}else return t.child.isShown()?(t.child(!1),c(t.node()).removeClass("parent"),!1):(t.child(i(),"child").show(),c(t.node()).addClass("parent"),!0)},childRowImmediate:function(t,e,i){return!e&&t.child.isShown()||!t.responsive.hasHidden()?(t.child(!1),c(t.node()).removeClass("parent"),!1):(t.child(i(),"child").show(),c(t.node()).addClass("parent"),!0)},modal:function(t){return function(e,i,s){if(i)c("div.dtr-modal-content").empty().append(s());else{var n=function(){l.remove(),c(document).off("keypress.dtr")},l=c('<div class="dtr-modal"/>').append(c('<div class="dtr-modal-display"/>').append(c('<div class="dtr-modal-content"/>').append(s())).append(c('<div class="dtr-modal-close">&times;</div>').click(function(){n()}))).append(c('<div class="dtr-modal-background"/>').click(function(){n()})).appendTo("body");c(document).on("keyup.dtr",function(r){r.keyCode===27&&(r.stopPropagation(),n())})}t&&t.header&&c("div.dtr-modal-content").prepend("<h2>"+t.header(e)+"</h2>")}}};L.renderer={listHiddenNodes:function(){return function(t,e,i){var s=this,n=c('<ul data-dtr-index="'+e+'" class="dtr-details"/>'),l=!1;return c.each(i,function(r,a){if(a.hidden){var o=a.className?'class="'+a.className+'"':"";c("<li "+o+' data-dtr-index="'+a.columnIndex+'" data-dt-row="'+a.rowIndex+'" data-dt-column="'+a.columnIndex+'"><span class="dtr-title">'+a.title+"</span> </li>").append(c('<span class="dtr-data"/>').append(s._childNodes(t,a.rowIndex,a.columnIndex))).appendTo(n),l=!0}}),l?n:!1}},listHidden:function(){return function(t,e,i){var s=c.map(i,function(n){var l=n.className?'class="'+n.className+'"':"";return n.hidden?"<li "+l+' data-dtr-index="'+n.columnIndex+'" data-dt-row="'+n.rowIndex+'" data-dt-column="'+n.columnIndex+'"><span class="dtr-title">'+n.title+'</span> <span class="dtr-data">'+n.data+"</span></li>":""}).join("");return s?c('<ul data-dtr-index="'+e+'" class="dtr-details"/>').append(s):!1}},tableAll:function(t){return t=c.extend({tableClass:""},t),function(e,i,s){var n=c.map(s,function(l){var r=l.className?'class="'+l.className+'"':"";return"<tr "+r+' data-dt-row="'+l.rowIndex+'" data-dt-column="'+l.columnIndex+'"><td>'+l.title+":</td> <td>"+l.data+"</td></tr>"}).join("");return c('<table class="'+t.tableClass+' dtr-details" width="100%"/>').append(n)}}};L.defaults={breakpoints:L.breakpoints,auto:!0,details:{display:L.display.childRow,renderer:L.renderer.listHidden(),target:0,type:"inline"},orthogonal:"display"};var N=c.fn.dataTable.Api;N.register("responsive()",function(){return this});N.register("responsive.index()",function(t){return t=c(t),{column:t.data("dtr-index"),row:t.parent().data("dtr-index")}});N.register("responsive.rebuild()",function(){return this.iterator("table",function(t){t._responsive&&t._responsive._classLogic()})});N.register("responsive.recalc()",function(){return this.iterator("table",function(t){t._responsive&&(t._responsive._resizeAuto(),t._responsive._resize())})});N.register("responsive.hasHidden()",function(){var t=this.context[0];return t._responsive?c.inArray(!1,t._responsive._responsiveOnlyHidden())!==-1:!1});N.registerPlural("columns().responsiveHidden()","column().responsiveHidden()",function(){return this.iterator("column",function(t,e){return t._responsive?t._responsive._responsiveOnlyHidden()[e]:!1},1)});L.version="2.4.1";c.fn.dataTable.Responsive=L;c.fn.DataTable.Responsive=L;c(document).on("preInit.dt.dtr",function(t,e,i){if(t.namespace==="dt"&&(c(e.nTable).hasClass("responsive")||c(e.nTable).hasClass("dt-responsive")||e.oInit.responsive||k.defaults.responsive)){var s=e.oInit.responsive;s!==!1&&new L(e,c.isPlainObject(s)?s:{})}});const F="aāiīuūṛṝeēoōkgṅcjñṭḍṇtdnpbmyrlvḻḷṟṉśṣsh".split("").reverse(),D=new Map;for(const[t,e]of F.entries())D.set(e,t);const R=(t,e,i="asc")=>{const s=Math.min(t.length,e.length);let n=0;for(;n<s;){const l=t.charAt(n).toLowerCase(),r=e.charAt(n).toLowerCase();if(l===r)n++;else{const a=D.get(l)||-1,o=D.get(r)||-1;return i==="asc"?a<o:a>o}}return i==="asc"?t.length>e.length:t.length<e.length};k.ext.type.search.tamil=t=>t?q(t):"";const q=t=>t?t.replace(/<.*?>|\u00AD/g,"").trim().replace(/\s+/," ").toLowerCase():"";k.ext.type.order["tamil-asc"]=(t,e)=>R(q(t),q(e),"asc");k.ext.type.order["tamil-desc"]=(t,e)=>R(q(t),q(e),"desc");k.ext.type.order["shelfmark-pre"]=t=>t?t.replace(/\d+/g,e=>e.padStart(4,"0")):"0000";k.ext.type.order["extent-pre"]=t=>t.match(/^\d+ f?f.$/)?parseInt(t)*2:parseInt(t);k.ext.type.order["numrange-pre"]=t=>{if(t.match("–")){const e=t.split("–");return e[0]||e[1]}else return t};k.ext.type.order["hyphenated-pre"]=t=>t?t.replace(/<.*?>|\u00AD/g,"").replace(/\s+/g," ").toLowerCase():"";k.ext.type.search.hyphenated=t=>t?t.replace(/<.*?>|\u00AD/g,"").replace(/\s+/g," ").toLowerCase():"";const j=function(t){for(var e=t.target.closest("[data-anno]");e&&e.hasAttribute("data-anno");)M.make(t,e),e=e.parentNode},M={make:function(t,e){const i=e.dataset.anno;if(!i)return;var s=document.getElementById("tooltip");const n=document.createElement("div");if(s){for(const l of s.childNodes)if(l.myTarget===e)return;n.appendChild(document.createElement("hr"))}else s=document.createElement("div"),s.id="tooltip",s.style.top=t.clientY+10+"px",s.style.left=t.clientX+"px",document.body.appendChild(s),n.myTarget=e;n.appendChild(document.createTextNode(i)),n.myTarget=e,s.appendChild(n),e.addEventListener("mouseleave",M.remove,{once:!0}),s.animate([{opacity:0},{opacity:1,easing:"ease-in"}],200)},remove:function(t){const e=document.getElementById("tooltip");if(!e)return;if(e.children.length===1){e.remove();return}const i=t.target;for(const s of e.childNodes)if(s.myTarget===i){s.remove();break}if(e.children.length===1){const s=e.firstChild.firstChild;s.tagName==="HR"&&s.remove()}}};let $=function(){let t=0,e=[];return{set:function(i){return e.push({offset:++t,ptr:i}),e[e.length-1].offset},remove:function(i){e=e.filter(function(n){return n.offset!=i}).splice(0)},closeAllButMe:function(i){e.forEach(function(s){s.offset!=i&&s.ptr.closeOrder()})}}}();function C(t,e){let i=this;if(this.instanceOffset=$.set(i),this.domSelector=t,this.root=document.querySelector(t),this.rootToken=null,this.main,this.button,this.title,this.isMultiple=this.root.hasAttribute("multiple"),this.multipleSize=this.isMultiple&&this.root.hasAttribute("size")?parseInt(this.root.getAttribute("size")):-1,this.isOptgroups=!1,this.currentOptgroup=0,this.drop,this.top,this.left,this.options,this.listElements,this.isDisabled=!1,this.search=!1,this.searchZone=null,this.inputBox=null,this.disabledItems=[],this.ulminWidth=140,this.ulmaxWidth=1/0,this.ulminHeight=25,this.maxOptionWidth=1/0,this.maxSelect=1/0,this.isInitRemote=!1,this.isSearchRemote=!1,this.onInit=null,this.onSearch=null,this.onInitSize=null,this.forbidenAttributes=["class","selected","disabled","data-text","data-value","style"],this.forbidenClasses=["active","disabled"],this.userOptions={maxWidth:500,minWidth:-1,maxHeight:400,translations:{all:"All",item:"item",items:"items",selectAll:"Select All",clearAll:"Clear All"},search:!1,placeHolder:"",stayOpen:!1,disableSelectAll:!1,buttonItemsSeparator:","},this.keepInlineStyles=!1,this.keepInlineCaretStyles=!0,e){if(e.itemsSeparator!=null&&(this.userOptions.buttonItemsSeparator=e.itemsSeparator),e.maxWidth!=null&&(this.userOptions.maxWidth=e.maxWidth),e.minWidth!=null&&(this.userOptions.minWidth=e.minWidth),e.maxHeight!=null&&(this.userOptions.maxHeight=e.maxHeight),e.translations!=null)for(var s in e.translations)e.translations.hasOwnProperty(s)&&this.userOptions.translations[s]&&(this.userOptions.translations[s]=e.translations[s]);e.placeHolder!=null&&(this.userOptions.placeHolder=e.placeHolder),e.search!=null&&(this.search=e.search),e.remote!=null&&e.remote&&(e.remote.onInit!=null&&typeof e.remote.onInit=="function"&&(this.onInit=e.remote.onInit,this.isInitRemote=!0),e.remote.onInitSize!=null&&(this.onInitSize=e.remote.onInitSize,this.onInitSize<3&&(this.onInitSize=3)),e.remote.onSearch!=null&&typeof e.remote.onSearch=="function"&&(this.onSearch=e.remote.onSearch,this.isSearchRemote=!0)),e.stayOpen!=null&&(this.userOptions.stayOpen=e.stayOpen),e.disableSelectAll!=null&&(this.userOptions.disableSelectAll=e.disableSelectAll),e.maxSelect!=null&&!isNaN(e.maxSelect)&&e.maxSelect>=1&&(this.maxSelect=e.maxSelect,this.userOptions.disableSelectAll=!0),e.maxOptionWidth!=null&&!isNaN(e.maxOptionWidth)&&e.maxOptionWidth>=20&&(this.maxOptionWidth=e.maxOptionWidth,this.ulminWidth=e.maxOptionWidth+60,this.ulmaxWidth=e.maxOptionWidth+60),e.keepInlineStyles!=null&&(this.keepInlineStyles=e.keepInlineStyles),e.keepInlineCaretStyles!=null&&(this.keepInlineCaretStyles=e.keepInlineCaretStyles)}this.closeOrder=function(){let n=this;n.userOptions.stayOpen||(n.drop.style.visibility="hidden",n.search&&(n.inputBox.value="",Array.prototype.slice.call(n.listElements).forEach(function(l){l.classList.remove("hide")})))},this.getCssArray=function(n){let l=[];return n===".vsb-main button"&&(l=[{key:"min-width",value:"120px"},{key:"border-radius",value:"0"},{key:"width",value:"100%"},{key:"text-align",value:"left"},{key:"z-index",value:"1"},{key:"color",value:"#333"},{key:"background",value:"white !important"},{key:"border",value:"1px solid #999 !important"},{key:"line-height",value:"20px"},{key:"font-size",value:"14px"},{key:"padding",value:"6px 12px"}]),r(l);function r(a){let o="";return a.forEach(function(h){o+=h.key+":"+h.value+";"}),o}},this.init=function(){let n=this;n.isInitRemote?n.onInit("",n.onInitSize).then(function(l){n.buildSelect(l),n.createTree()}):n.createTree()},this.getResult=function(){let n=this,l=[];return n.root.querySelectorAll("option").forEach(function(a){a.selected&&l.push(a.value)}),l},this.createTree=function(){this.rootToken=i.domSelector.replace(/[^A-Za-z0-9]+/,""),this.root.style.display="none";let n=document.getElementById("btn-group-"+this.rootToken);if(n&&n.remove(),this.main=document.createElement("div"),this.root.parentNode.insertBefore(this.main,this.root.nextSibling),this.main.classList.add("vsb-main"),this.main.setAttribute("id","btn-group-"+this.rootToken),this.main.style.marginLeft=this.main.style.marginLeft,i.userOptions.stayOpen&&(this.main.style.minHeight=this.userOptions.maxHeight+10+"px"),i.userOptions.stayOpen)this.button=document.createElement("div");else if(this.button=document.createElement("button"),this.keepInlineStyles){var l=i.getCssArray(".vsb-main button");this.button.setAttribute("style",l)}this.button.style.maxWidth=this.userOptions.maxWidth+"px",this.userOptions.minWidth!==-1&&(this.button.style.minWidth=this.userOptions.minWidth+"px"),this.main.appendChild(this.button),this.title=document.createElement("span"),this.button.appendChild(this.title),this.title.classList.add("title");let r=document.createElement("span");if(this.button.appendChild(r),r.classList.add("caret"),this.keepInlineCaretStyles&&(r.style.position="absolute",r.style.right="8px",r.style.marginTop="8px"),i.userOptions.stayOpen&&(r.style.display="none",this.title.style.paddingLeft="20px",this.title.style.fontStyle="italic",this.title.style.verticalAlign="20%"),this.drop=document.createElement("div"),this.main.appendChild(this.drop),this.drop.classList.add("vsb-menu"),this.drop.style.zIndex=2e3-this.instanceOffset,this.ul=document.createElement("ul"),this.drop.appendChild(this.ul),this.ul.style.maxHeight=this.userOptions.maxHeight+"px",this.ul.style.minWidth=this.ulminWidth+"px",this.ul.style.maxWidth=this.ulmaxWidth+"px",this.ul.style.minHeight=this.ulminHeight+"px",this.isMultiple&&(this.ul.classList.add("multi"),!i.userOptions.disableSelectAll)){let d=document.createElement("option");d.setAttribute("value","all"),d.innerText=i.userOptions.translations.selectAll,this.root.insertBefore(d,this.root.hasChildNodes()?this.root.childNodes[0]:null)}let a="",o="",h=0;if(this.search){this.searchZone=document.createElement("div"),this.ul.appendChild(this.searchZone),this.searchZone.classList.add("vsb-js-search-zone"),this.searchZone.style.zIndex=2001-this.instanceOffset,this.inputBox=document.createElement("input"),this.searchZone.appendChild(this.inputBox),this.inputBox.setAttribute("type","text"),this.inputBox.setAttribute("id","search_"+this.rootToken),this.maxOptionWidth<1/0&&(this.searchZone.style.maxWidth=i.maxOptionWidth+30+"px",this.inputBox.style.maxWidth=i.maxOptionWidth+30+"px");var p=document.createElement("p");this.ul.appendChild(p),p.style.fontSize="12px",p.innerHTML="&nbsp;",this.ul.addEventListener("scroll",function(d){var A=this.scrollTop;i.searchZone.parentNode.style.top=A+"px"})}if(this.options=document.querySelectorAll(this.domSelector+" > option"),Array.prototype.slice.call(this.options).forEach(function(d){let A=d.textContent,m=d.value,f;d.hasAttributes()&&(f=Array.prototype.slice.call(d.attributes).filter(function(x){return i.forbidenAttributes.indexOf(x.name)===-1}));let g=d.getAttribute("class");g?g=g.split(" ").filter(function(x){return i.forbidenClasses.indexOf(x)===-1}):g=[];let b=document.createElement("li"),v=d.hasAttribute("selected"),S=d.hasAttribute("disabled");i.ul.appendChild(b),b.setAttribute("data-value",m),b.setAttribute("data-text",A),f!==void 0&&f.forEach(function(x){b.setAttribute(x.name,x.value)}),g.forEach(function(x){b.classList.add(x)}),i.maxOptionWidth<1/0&&(b.classList.add("short"),b.style.maxWidth=i.maxOptionWidth+"px"),v&&(h++,a+=o+A,o=i.userOptions.buttonItemsSeparator,b.classList.add("active"),i.isMultiple||(i.title.textContent=A,g.length!=0&&g.forEach(function(x){i.title.classList.add(x)}))),S&&b.classList.add("disabled"),b.appendChild(document.createTextNode(" "+A))}),document.querySelector(i.domSelector+" optgroup")!==null){i.isOptgroups=!0,i.options=document.querySelectorAll(i.domSelector+" option");let d=document.querySelectorAll(i.domSelector+" optgroup");Array.prototype.slice.call(d).forEach(function(A){let m=A.querySelectorAll("option"),f=document.createElement("li"),g=document.createElement("span"),b=document.createElement("i"),v=document.createElement("b"),S=A.getAttribute("data-way");S||(S="closed"),(!S||S!=="closed"&&S!=="open")&&(S="closed"),f.appendChild(g),f.appendChild(b),i.ul.appendChild(f),f.classList.add("grouped-option"),f.classList.add(S),i.currentOptgroup++;let x=i.rootToken+"-opt-"+i.currentOptgroup;f.id=x,f.appendChild(v),v.appendChild(document.createTextNode(A.label)),f.setAttribute("data-text",A.label),i.ul.appendChild(f),Array.prototype.slice.call(m).forEach(function(_){let O=_.textContent,W=_.value,E=_.getAttribute("class");E?E=E.split(" "):E=[],E.push(S);let I=document.createElement("li"),V=_.hasAttribute("selected");i.ul.appendChild(I),I.setAttribute("data-value",W),I.setAttribute("data-text",O),I.setAttribute("data-parent",x),E.length!=0&&E.forEach(function(H){I.classList.add(H)}),V&&(h++,a+=o+O,o=i.userOptions.buttonItemsSeparator,I.classList.add("active"),i.isMultiple||(i.title.textContent=O,E.length!=0&&E.forEach(function(H){i.title.classList.add(H)}))),I.appendChild(document.createTextNode(O))})})}if(i.options.length-Number(!i.userOptions.disableSelectAll)==h)a=i.userOptions.translations.all;else if(i.multipleSize!=-1&&h>i.multipleSize){let d=h===1?i.userOptions.translations.item:i.userOptions.translations.items;a=h+" "+d}i.isMultiple&&(i.title.innerHTML=a),i.userOptions.placeHolder!=""&&i.title.textContent==""&&(i.title.textContent=i.userOptions.placeHolder),i.listElements=i.drop.querySelectorAll("li:not(.grouped-option)"),i.search&&i.inputBox.addEventListener("keyup",function(d){let A=d.target.value.toUpperCase(),m=A.length,f=0,g=0,b=null;i.isSearchRemote?m==0?i.remoteSearchIntegrate(null):m>=3&&i.onSearch(A).then(function(v){i.remoteSearchIntegrate(v)}):(m<3?Array.prototype.slice.call(i.listElements).forEach(function(v){v.getAttribute("data-value")==="all"?b=v:(v.classList.remove("hidden-search"),f++,g+=v.classList.contains("active"))}):Array.prototype.slice.call(i.listElements).forEach(function(v){v.getAttribute("data-value")!=="all"?v.getAttribute("data-text").toUpperCase().indexOf(A)===-1&&v.getAttribute("data-value")!=="all"?v.classList.add("hidden-search"):(f++,v.classList.remove("hidden-search"),g+=v.classList.contains("active")):b=v}),b&&(f===0?b.classList.add("disabled"):b.classList.remove("disabled"),g!==f?(b.classList.remove("active"),b.innerText=i.userOptions.translations.selectAll,b.setAttribute("data-selected","false")):(b.classList.add("active"),b.innerText=i.userOptions.translations.clearAll,b.setAttribute("data-selected","true"))))}),i.userOptions.stayOpen?(i.drop.style.visibility="visible",i.drop.style.boxShadow="none",i.drop.style.minHeight=this.userOptions.maxHeight+10+"px",i.drop.style.position="relative",i.drop.style.left="0px",i.drop.style.top="0px",i.button.style.border="none"):this.main.addEventListener("click",function(d){i.isDisabled||(i.drop.style.visibility="visible",document.addEventListener("click",y),d.preventDefault(),d.stopPropagation(),i.userOptions.stayOpen||$.closeAllButMe(i.instanceOffset))}),this.drop.addEventListener("click",function(d){if(i.isDisabled||d.target.tagName==="INPUT")return;let A=d.target.tagName==="SPAN",m=d.target.tagName==="I",f=d.target.parentElement;if(!f.hasAttribute("data-value")&&f.classList.contains("grouped-option")){if(!A&&!m)return;let S,x;m?i.checkUncheckFromParent(f):(f.classList.contains("open")?(S="open",x="closed"):(S="closed",x="open"),f.classList.remove(S),f.classList.add(x),i.drop.querySelectorAll("[data-parent='"+f.id+"']").forEach(function(O){O.classList.remove(S),O.classList.add(x)}));return}let g=d.target.getAttribute("data-value"),b=d.target.getAttribute("data-text"),v=d.target.getAttribute("class");if(!(v&&v.indexOf("disabled")!=-1)&&!(v&&v.indexOf("overflow")!=-1)){if(g==="all"){d.target.hasAttribute("data-selected")&&d.target.getAttribute("data-selected")==="true"?i.setValue("none"):i.setValue("all");return}if(!i.isMultiple)i.root.value=g,i.title.textContent=b,v?i.title.setAttribute("class",v+" title"):i.title.setAttribute("class","title"),Array.prototype.slice.call(i.listElements).forEach(function(S){S.classList.remove("active")}),b!=""&&d.target.classList.add("active"),i.privateSendChange(),i.userOptions.stayOpen||y();else{let S=!1;v&&(S=v.indexOf("active")!=-1),S?d.target.classList.remove("active"):d.target.classList.add("active"),d.target.hasAttribute("data-parent")&&i.checkUncheckFromChild(d.target);let x="",_="",O=0,W=0;for(let E=0;E<i.options.length;E++)W++,i.options[E].value==g&&(i.options[E].selected=!S),i.options[E].selected&&(O++,x+=_+i.options[E].textContent,_=i.userOptions.buttonItemsSeparator);if(W==O-Number(!i.userOptions.disableSelectAll))x=i.userOptions.translations.all;else if(i.multipleSize!=-1&&O>i.multipleSize){let E=O===1?i.userOptions.translations.item:i.userOptions.translations.items;x=O+" "+E}i.title.textContent=x,i.checkSelectMax(O),i.checkUncheckAll(),i.privateSendChange()}d.preventDefault(),d.stopPropagation(),i.userOptions.placeHolder!=""&&i.title.textContent==""&&(i.title.textContent=i.userOptions.placeHolder)}});function y(){document.removeEventListener("click",y),i.drop.style.visibility="hidden",i.search&&(i.inputBox.value="",Array.prototype.slice.call(i.listElements).forEach(function(d){d.classList.remove("hidden-search")}))}},this.init(),this.checkUncheckAll()}C.prototype.buildSelect=function(t){let e=this;if(!(t==null||t.length<1))if(e.isOptgroups||(e.isOptgroups=t[0].parent!=null&&t[0].parent!=""),e.isOptgroups){let i={};t=t.filter(function(s){return s.parent!=null&&s.parent!=""}),t.forEach(function(s){i[s.parent]||(i[s.parent]=!0)});for(let s in i){let n=document.createElement("optgroup");n.setAttribute("label",s),options=t.filter(function(l){return l.parent==s}),options.forEach(function(l){let r=document.createElement("option");r.value=l.value,r.text=l.text,l.selected&&r.setAttribute("selected",!0),n.appendChild(r)}),e.root.appendChild(n)}}else t.forEach(function(i){let s=document.createElement("option");s.value=i.value,s.text=i.text,i.selected&&s.setAttribute("selected",!0),e.root.appendChild(s)})};C.prototype.remoteSearchIntegrate=function(t){let e=this;if(t==null||t.length==0){let s=e.optionsCheckedToData();s&&(t=s.slice(0)),e.remoteSearchIntegrateIt(t)}else{let s=e.optionsCheckedToData();if(s.length>0)for(var i=t.length-1;i>=0;i--)s.indexOf(t[i].id)!=-1&&t.slice(i,1);t=t.concat(s),e.remoteSearchIntegrateIt(t)}};C.prototype.optionsCheckedToData=function(){let t=this,e=[],i=t.ul.querySelectorAll("li.active:not(.grouped-option)"),s={};return i&&Array.prototype.slice.call(i).forEach(function(n){let l={value:n.getAttribute("data-value"),text:n.getAttribute("data-text"),selected:!0};if(l.value!=="all"){if(t.isOptgroups){let r=n.getAttribute("data-parent");if(s[r]!=null)l.parent=s[r];else{let o=t.ul.querySelector("#"+r).getAttribute("data-text");s[r]=o,l.parent=o}}e.push(l)}}),e};C.prototype.removeOptionsNotChecked=function(t){let e=this,i=e.onInitSize,s=t==null?0:t.length,n=e.root.length;if(n+s>i){let r=n+s-i-1,a=0;for(var l=e.root.length-1;l>=0;l--)e.root.options[l].selected==!1&&a<=r&&(a++,e.root.remove(l))}};C.prototype.changeTree=function(t,e){let i=this;i.empty(),i.remoteSearchIntegrateIt(t),e&&e.onSearch&&typeof e.onSearch=="function"&&(i.onSearch=e.onSearch,i.isSearchRemote=!0),i.listElements=this.drop.querySelectorAll("li:not(.grouped-option)")};C.prototype.remoteSearchIntegrateIt=function(t){let e=this;if(!(t==null||t.length==0)){for(;e.root.firstChild;)e.root.removeChild(e.root.firstChild);e.buildSelect(t),e.reloadTree()}};C.prototype.reloadTree=function(){let t=this,e=t.ul.querySelectorAll("li");if(e!=null)for(var i=e.length-1;i>=0;i--)e[i].getAttribute("data-value")!=="all"&&t.ul.removeChild(e[i]);if(t.isOptgroups){if(document.querySelector(t.domSelector+" optgroup")!==null){t.options=document.querySelectorAll(this.domSelector+" option");let s=document.querySelectorAll(this.domSelector+" optgroup");Array.prototype.slice.call(s).forEach(function(n){let l=n.querySelectorAll("option"),r=document.createElement("li"),a=document.createElement("span"),o=document.createElement("i"),h=document.createElement("b"),p=n.getAttribute("data-way");p||(p="closed"),(!p||p!=="closed"&&p!=="open")&&(p="closed"),r.appendChild(a),r.appendChild(o),t.ul.appendChild(r),r.classList.add("grouped-option"),r.classList.add(p),t.currentOptgroup++;let u=t.rootToken+"-opt-"+t.currentOptgroup;r.id=u,r.appendChild(h),h.appendChild(document.createTextNode(n.label)),r.setAttribute("data-text",n.label),t.ul.appendChild(r),Array.prototype.slice.call(l).forEach(function(y){let d=y.textContent,A=y.value,m=y.getAttribute("class");m?m=m.split(" "):m=[],m.push(p);let f=document.createElement("li"),g=y.hasAttribute("selected");t.ul.appendChild(f),f.setAttribute("data-value",A),f.setAttribute("data-text",d),f.setAttribute("data-parent",u),m.length!=0&&m.forEach(function(b){f.classList.add(b)}),g&&(t.userOptions.buttonItemsSeparator,f.classList.add("active"),t.isMultiple||(t.title.textContent=d,m.length!=0&&m.forEach(function(b){t.title.classList.add(b)}))),f.appendChild(document.createTextNode(d))})})}t.listElements=this.drop.querySelectorAll("li:not(.grouped-option)")}else t.options=t.root.querySelectorAll("option"),Array.prototype.slice.call(t.options).forEach(function(s){let n=s.textContent,l=s.value;if(l!="all"){let r;s.hasAttributes()&&(r=Array.prototype.slice.call(s.attributes).filter(function(u){return t.forbidenAttributes.indexOf(u.name)===-1}));let a=s.getAttribute("class");a?a=a.split(" ").filter(function(u){return t.forbidenClasses.indexOf(u)===-1}):a=[];let o=document.createElement("li"),h=s.hasAttribute("selected"),p=s.disabled;t.ul.appendChild(o),o.setAttribute("data-value",l),o.setAttribute("data-text",n),r!==void 0&&r.forEach(function(u){o.setAttribute(u.name,u.value)}),a.forEach(function(u){o.classList.add(u)}),t.maxOptionWidth<1/0&&(o.classList.add("short"),o.style.maxWidth=t.maxOptionWidth+"px"),h&&(t.userOptions.buttonItemsSeparator,o.classList.add("active"),t.isMultiple||(t.title.textContent=n,a.length!=0&&a.forEach(function(u){t.title.classList.add(u)}))),p&&o.classList.add("disabled"),o.appendChild(document.createTextNode(" "+n))}})};C.prototype.disableItems=function(t){let e=this,i=[];T(t)=="string"&&(t=t.split(",")),T(t)=="array"&&Array.prototype.slice.call(e.options).forEach(function(s){t.indexOf(s.value)!=-1&&(i.push(s.value),s.setAttribute("disabled",""))}),Array.prototype.slice.call(e.listElements).forEach(function(s){let n=s.getAttribute("data-value");i.indexOf(n)!=-1&&s.classList.add("disabled")})};C.prototype.enableItems=function(t){let e=this,i=[];T(t)=="string"&&(t=t.split(",")),T(t)=="array"&&Array.prototype.slice.call(e.options).forEach(function(s){t.indexOf(s.value)!=-1&&(i.push(s.value),s.removeAttribute("disabled"))}),Array.prototype.slice.call(e.listElements).forEach(function(s){i.indexOf(s.getAttribute("data-value"))!=-1&&s.classList.remove("disabled")})};C.prototype.checkSelectMax=function(t){let e=this;e.maxSelect==1/0||!e.isMultiple||(e.maxSelect<=t?Array.prototype.slice.call(e.listElements).forEach(function(i){i.hasAttribute("data-value")&&!i.classList.contains("disabled")&&!i.classList.contains("active")&&i.classList.add("overflow")}):Array.prototype.slice.call(e.listElements).forEach(function(i){i.classList.contains("overflow")&&i.classList.remove("overflow")}))};C.prototype.checkUncheckFromChild=function(t){let e=this,i=t.getAttribute("data-parent"),s=document.getElementById(i);if(!e.isMultiple)return;let n=e.drop.querySelectorAll("li"),l=Array.prototype.slice.call(n).filter(function(o){return o.hasAttribute("data-parent")&&o.getAttribute("data-parent")==i&&!o.classList.contains("hidden-search")}),r=0,a=l.length;a!=0&&(l.forEach(function(o){o.classList.contains("active")&&r++}),r===a||r===0?r===0?s.classList.remove("checked"):s.classList.add("checked"):s.classList.remove("checked"))};C.prototype.checkUncheckFromParent=function(t){let e=this,i=t.id;if(!e.isMultiple)return;let s=e.drop.querySelectorAll("li"),n=Array.prototype.slice.call(s).filter(function(a){return a.hasAttribute("data-parent")&&a.getAttribute("data-parent")==i&&!a.classList.contains("hidden-search")}),l=0,r=n.length;r!=0&&(n.forEach(function(a){a.classList.contains("active")&&l++}),l===r||l===0?(n.forEach(function(a){var o=document.createEvent("HTMLEvents");o.initEvent("click",!0,!1),a.dispatchEvent(o)}),l===0?t.classList.add("checked"):t.classList.remove("checked")):(t.classList.remove("checked"),n.forEach(function(a){if(!a.classList.contains("active")){var o=document.createEvent("HTMLEvents");o.initEvent("click",!0,!1),a.dispatchEvent(o)}})))};C.prototype.checkUncheckAll=function(){let t=this;if(!t.isMultiple)return;let e=0,i=0,s=0,n=null;t.listElements!=null&&(Array.prototype.slice.call(t.listElements).forEach(function(l){l.hasAttribute("data-value")&&(l.getAttribute("data-value")==="all"&&(n=l),l.getAttribute("data-value")!=="all"&&!l.classList.contains("hidden-search")&&!l.classList.contains("disabled")&&(i++,e+=l.classList.contains("active")),l.getAttribute("data-value")!=="all"&&!l.classList.contains("disabled")&&s++)}),n&&(e===i?(e===s&&(t.title.textContent=t.userOptions.translations.all),n.classList.add("active"),n.innerText=t.userOptions.translations.clearAll,n.setAttribute("data-selected","true")):e===0&&(t.title.textContent=t.userOptions.placeHolder,n.classList.remove("active"),n.innerText=t.userOptions.translations.selectAll,n.setAttribute("data-selected","false"))))};C.prototype.setValue=function(t){let e=this,i=e.drop.querySelectorAll("li");if(t==null||t==null||t=="")e.empty();else if(e.isMultiple){T(t)=="string"&&(t==="all"?(t=[],Array.prototype.slice.call(i).forEach(function(n){if(n.hasAttribute("data-value")){let l=n.getAttribute("data-value");l!=="all"?(!n.classList.contains("hidden-search")&&!n.classList.contains("disabled")&&t.push(n.getAttribute("data-value")),n.classList.contains("active")&&(n.classList.contains("hidden-search")||n.classList.contains("disabled"))&&t.push(l)):n.classList.add("active")}else n.classList.contains("grouped-option")&&n.classList.add("checked")})):t==="none"?(t=[],Array.prototype.slice.call(i).forEach(function(n){if(n.hasAttribute("data-value")){let l=n.getAttribute("data-value");l!=="all"&&n.classList.contains("active")&&(n.classList.contains("hidden-search")||n.classList.contains("disabled"))&&t.push(l)}else n.classList.contains("grouped-option")&&n.classList.remove("checked")})):t=t.split(","));let s=[];if(T(t)=="array"){Array.prototype.slice.call(e.options).forEach(function(o){t.indexOf(o.value)!==-1?(o.selected=!0,s.push(o.value)):o.selected=!1});let n="",l="",r=0,a=0;if(Array.prototype.slice.call(i).forEach(function(o){o.value!=="all"&&a++,s.indexOf(o.getAttribute("data-value"))!=-1?(o.classList.add("active"),r++,n+=l+o.getAttribute("data-text"),l=e.userOptions.buttonItemsSeparator):o.classList.remove("active")}),a==r-Number(!e.userOptions.disableSelectAll))n=e.userOptions.translations.all;else if(e.multipleSize!=-1&&r>e.multipleSize){let o=r===1?e.userOptions.translations.item:e.userOptions.translations.items;n=r+" "+o}e.title.textContent=n,e.privateSendChange()}e.checkUncheckAll()}else{let s=!1,n="";Array.prototype.slice.call(i).forEach(function(l){l.getAttribute("data-value")==t?(l.classList.add("active"),s=!0,n=l.getAttribute("data-text")):l.classList.remove("active")}),Array.prototype.slice.call(e.options).forEach(function(l){l.value==t?(l.selected=!0,className=l.getAttribute("class"),className||(className="")):l.selected=!1}),s&&(e.title.textContent=n,e.userOptions.placeHolder!=""&&e.title.textContent==""&&(e.title.textContent=e.userOptions.placeHolder),className!=""?e.title.setAttribute("class",className+" title"):e.title.setAttribute("class","title"))}};C.prototype.privateSendChange=function(){let t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.root.dispatchEvent(t)};C.prototype.empty=function(){Array.prototype.slice.call(this.listElements).forEach(function(e){e.classList.remove("active")});let t=this.drop.querySelectorAll("li.grouped-option");t&&Array.prototype.slice.call(t).forEach(function(e){e.classList.remove("checked")}),Array.prototype.slice.call(this.options).forEach(function(e){e.selected=!1}),this.title.textContent="",this.userOptions.placeHolder!=""&&this.title.textContent==""&&(this.title.textContent=this.userOptions.placeHolder),this.checkUncheckAll(),this.privateSendChange()};C.prototype.destroy=function(){let t=document.getElementById("btn-group-"+this.rootToken);t&&($.remove(this.instanceOffset),t.remove(),this.root.style.display="inline-block")};C.prototype.disable=function(){this.main.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation()});let t=document.getElementById("btn-group-"+this.rootToken);t&&(button=t.querySelector("button"),button&&button.classList.add("disabled"),this.isDisabled=!0)};C.prototype.enable=function(){let t=document.getElementById("btn-group-"+this.rootToken);t&&(button=t.querySelector("button"),button&&button.classList.remove("disabled"),this.isDisabled=!1)};C.prototype.showOptions=function(){console.log(this.userOptions)};"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});function T(t){return Object.prototype.toString.call(t).replace("[object ","").replace("]","").toLowerCase()}const z=new Map([["shelfmark",{title:"shelfmark",type:"shelfmark",sql:"mss.filename, shelfmark",post:t=>`<a href="/mss/${t.filename}" class="shelfmark">${t.shelfmark}</a>`}],["repository",{sql:"repository",title:"repository"}],["title",{sql:"title",title:"title",type:"tamil",post:t=>w(t.title)}],["languages",{sql:"languages",title:"languages"}],["material",{sql:"material",title:"material"}],["width",{sql:"width",title:"width"}],["height",{sql:"height",title:"height"}],["extent",{sql:"extent",title:"extent",type:"extent"}],["date",{sql:"date",title:"date",type:"daterange"}],["images",{sql:"images",title:"images",post:t=>t.images?`<span class="smallcaps">${t.images}</span>`:""}],["blessing",{sql:"paratexts_blessing.text AS blessing",title:"blessing",table:"paratexts_blessing",type:"tamil",post:t=>w(t.blessing)}],["colophon",{sql:"paratexts_colophon.text AS colophon",title:"colophon",table:"paratexts_colophon",type:"tamil",post:t=>w(t.colophon)}],["header",{sql:"paratexts_header.text AS header",title:"header",table:"paratexts_header",type:"tamil",post:t=>w(t.header)}],["invocation",{sql:"paratexts_invocation.text AS invocation",title:"invocation",table:"paratexts_invocation",type:"tamil",post:t=>w(t.invocation)}],["ownership-statement",{sql:"[paratexts_ownership-statement].text AS [ownership-statement]",title:"ownership statement",table:"[paratexts_ownership-statement]",type:"tamil",post:t=>w(t["ownership-statement"])}],["satellite-stanza",{sql:"[paratexts_satellite-stanza].text AS [satellite-stanza]",title:"satellite stanza",table:"[paratexts_satellite-stanza]",type:"tamil",post:t=>w(t["satellite-stanza"])}],["table-of-contents",{sql:"[paratexts_table-of-contents].text AS [table-of-contents]",title:"table of contents",table:"[paratexts_table-of-contents]",type:"tamil",post:t=>w(t["table-of-contents"])}],["paratext_title",{sql:"paratexts_title.text AS paratext_title",title:"title",table:"[paratexts_title]",type:"tamil",post:t=>w(t.paratext_title)}],["tbc",{sql:"paratexts_TBC.text AS [tbc]",title:"TBC",table:"[paratexts_TBC]",type:"tamil",post:t=>w(t.tbc)}],["g_below-base",{sql:"[g_below-base].context AS [g_below-base], [g_below-base].text as [g_below-base_sort]",title:"ligature",searchcolumn:"[g_below-base].text",table:"[g_below-base]",type:"tamil",render:{_:"display",sort:"sort"},post:t=>({display:w(t["g_below-base"]),sort:t["g_below-base_sort"]})}],["g_post-base",{sql:"[g_post-base].context AS [g_post-base], [g_post-base].text as [g_post-base_sort]",title:"ligature",searchcolumn:"[g_below-base].text",table:"[g_post-base]",type:"tamil",render:{_:"display",sort:"sort"},post:t=>({display:w(t["g_post-base"]),sort:t["g_post-base_sort"]})}],["synch",{sql:"synch",title:"unit"}],["milestone",{sql:"milestone, facs",title:"page/folio",post:t=>t.milestone&&t.facs?`<a href="/mss/${t.filename}?facs=${t.facs}">${t.milestone}</a>`:t.milestone}],["placement",{sql:"placement",title:"placement"}]]),U=["Ancien fonds","Ariel","w/d","Burnouf","Cordier","Ducler","Haas","Reydellet","Vinson"];for(const t of U)z.set(`old_shelfmarks(${t})`,{title:"old shelfmark",type:"shelfmark",sql:`json_extract(old_shelfmarks, '$.${t}') AS 'old_shelfmarks(${t})'`});const X=async t=>{const e=await P("/mss/db/meta.db"),i=["shelfmark","repository","title","languages","material","extent","date","images"],s=[],n=[],l=t.dataset.sqlcolumns,r=l?l.split(", "):i,a=[];let o="DISTINCT";for(const b of r){const v=z.get(b);v&&(a.push(v.sql),v.table&&(s.push(`INNER JOIN ${v.table} ON ${v.table}.filename = mss.filename`),o=""))}const h=t.dataset.collection;h&&(s.push("INNER JOIN collections ON collections.filename = mss.filename"),n.push(`collections.collection = "${h}"`));const p=t.dataset.repository;p&&n.push(`mss.repository = "${p}"`);const u=t.dataset.collector;u&&(s.push("INNER JOIN persons ON persons.filename = mss.filename"),n.push(`persons.persname = "${u}" AND persons.role = "collector"`));const y=t.dataset.persons;y&&(s.push("INNER JOIN persons ON persons.filename = mss.filename"),n.push(`persons.persname IN (${y}) AND persons.role != ""`));const d=t.dataset.searchtext;d&&n.push(`${t.dataset.searchcolumn} LIKE ${d}`);const A=a.join(", ")+" ",m=s.join(" "),f=n.length>0?`WHERE ${n.join(" AND ")}`:"",g=await e.db.query(`SELECT ${o} ${A} FROM mss ${m} ${f} ORDER BY mss.filename`);return Z(g,r)},Z=(t,e)=>{const i=t.map(n=>{const l={};for(const r of e){const a=z.get(r);a?l[r]=a.post?a.post(n)||"":n[r]:l[r]=n[r]||""}return l}),s=e.map(n=>{const l=z.get(n),r={data:n,title:l.title,name:n};return l.type&&(r.type=l.type),l.render&&(r.render=l.render),r});return{rows:i,columns:s}},B=(t,e)=>{const i=e.target.dataset.name;if(!i)return;const s=t.column(`${i}:name`);s.search()!==e.target.value&&s.search(e.target.value).draw()},Y=(t,e)=>{const i=new k(`#${e.id}`,{searchable:!0,language:{search:"Filter: "},paging:!0,pageLength:100,lengthMenu:[[25,50,100,-1],[25,50,100,"All"]],sortable:!0,data:t.rows,columns:t.columns,responsive:{details:{type:"inline"}}}),s=document.createElement("tr");s.id="filter_inputs";for(const r of t.columns){const a=document.createElement("th"),o=document.createElement("input");o.type="text",o.dataset.name=r.name,o.placeholder=`Filter ${r.title}`,o.style.width="100%",a.appendChild(o),s.appendChild(a)}s.style.height="0px",document.querySelector("thead").prepend(s),s.addEventListener("keyup",B.bind(null,i)),s.addEventListener("change",B.bind(null,i)),s.addEventListener("clear",B.bind(null,i));const n=document.createElement("button");n.id="filter_button",n.title="More filters",n.append("+"),document.getElementById("index_filter").appendChild(n),n.addEventListener("click",r=>{const a=document.getElementById("filter_inputs");if(a.style.height==="0px"){a.style.height="auto";const o=[...a.querySelectorAll("th")],h=a.nextElementSibling.querySelectorAll("th");for(let p=0;p<o.length;p++)if(h.item(p).style.display!=="none"){const u=o[p];u.style.display="table-cell",u.style.marginBottom="1rem",u.style.marginTop="1rem"}r.target.textContent="–",r.target.title="Less filters"}else{a.style.height="0px";for(const o of a.querySelectorAll("th"))o.style.display="none",o.style.marginBottom="0px",o.style.marginTop="0px";r.target.textContent="+",r.target.title="More filters"}}),document.getElementById("spinner").style.display="none";const l=document.getElementById("tabright");return l&&(l.style.visibility="visible"),document.getElementById("index").style.visibility="visible",i.on("responsive-resize",()=>{const r=document.getElementById("filter_inputs");if(r.style.height==="0px")return;const a=[...r.querySelectorAll("th")],o=r.nextElementSibling.querySelectorAll("th");for(let h=0;h<a.length;h++){const p=a[h];o.item(h).style.display!=="none"?(p.style.display="table-cell",p.style.marginBottom="1rem",p.style.marginTop="1rem"):(p.style.display="none",p.style.marginBottom="0px",p.style.marginTop="0px")}}),e.addEventListener("mouseover",j),i};export{z as a,X as g,Y as m,C as v};

import{o as m,h as d,D as u}from"./hyphenate-ade347da.js";import{T as p,S as y}from"./transliterate-4a225a9a.js";/* empty css              */import"https://tst-project.github.io/lib/js/sanscript.mjs";const g=async t=>{document.getElementById("spinner").style.display="flex";const e=await m("/mss/db/fts.db"),a=p(t),n=y.escape(a).replace(/"/g,'""').replace(/^'/,`'"`).replace(/'$/,`"'`),l=await e.exec(`SELECT filename, shelfmark, title, snippet(fulltext,3,'<span class="highlit">','</span>','â€¦',200) AS snippet FROM fulltext WHERE text MATCH ${n} ORDER BY rank`);if(document.getElementById("spinner").style.display="none",l.length===0){document.getElementById("noresulttext").textContent=a,document.getElementById("noresult").style.visibility="visible";return}const r=l[0].values.map(s=>{const o=`<a href="/mss/${s[0]}" class="shelfmark">${s[1]}</a>`,c=d(s[2]);return[o,c,s[3]]});document.getElementById("index").style.visibility="visible",new u("#index",{searchable:!0,language:{search:"Filter:"},paging:!0,pageLength:100,lengthMenu:[[25,50,100,-1],[25,50,100,"All"]],sortable:!0,scrollX:!0,data:r,columns:[{title:"shelfmark",type:"shelfmark"},{title:"title",type:"tamil"},{title:"search result"}]})},i=t=>{const e=new URLSearchParams(window.location.search);e.set("q",t),window.location.search=e};document.getElementById("ftsinput").addEventListener("keyup",t=>{if(event.keyCode!==13)return;const e=t.target.value.trim();e!==""&&i(e)});document.getElementById("ftsbutton").addEventListener("click",t=>{const e=document.getElementById("ftsinput").value.trim();e!==""&&i(e)});const f=t=>{const e=document.getElementById("ftsinput"),n=new URLSearchParams(window.location.search).get("q");n&&(e.value=n,g(n)),e.style.visibility="visible"};window.addEventListener("DOMContentLoaded",f);

import{D as C,h as O,s as $}from"./hyphenate-65d9bac0.js";const R="aāiīuūṛṝeēoōkgṅcjñṭḍṇtdnpbmyrlvḻḷṟṉśṣsh".split("").reverse(),H=new Map;for(const[t,i]of R.entries())H.set(i,t);const z=(t,i,e="asc")=>{const s=Math.min(t.length,i.length);let l=0;for(;l<s;){const n=t.charAt(l).toLowerCase(),a=i.charAt(l).toLowerCase();if(n===a)l++;else{const r=H.get(n)||-1,o=H.get(a)||-1;return e==="asc"?r<o:r>o}}return e==="asc"?t.length>i.length:t.length<i.length};C.ext.type.search.tamil=t=>t?t.replace(/<.*?>|\u00AD/g,"").replace(/\s+/," ").toLowerCase():"";const q=t=>t?t.replace(/<.*?>|\u00AD/g,"").replace(/\s+/," ").toLowerCase():"";C.ext.type.order["tamil-asc"]=(t,i)=>z(q(t),q(i),"asc");C.ext.type.order["tamil-desc"]=(t,i)=>z(q(t),q(i),"desc");C.ext.type.order["shelfmark-pre"]=t=>t?t.replace(/\d+/g,i=>i.padStart(4,"0")):"0000";C.ext.type.order["extent-pre"]=t=>t.match(/^\d+ f?f.$/)?parseInt(t)*2:parseInt(t);C.ext.type.order["numrange-pre"]=t=>{if(t.match("–")){const i=t.split("–");return i[0]||i[1]}else return t};C.ext.type.order["hyphenated-pre"]=t=>t?t.replace(/<.*?>|\u00AD/g,"").replace(/\s+/g," ").toLowerCase():"";C.ext.type.search.hyphenated=t=>t?t.replace(/<.*?>|\u00AD/g,"").replace(/\s+/g," ").toLowerCase():"";const F=function(t){for(var i=t.target.closest("[data-anno]");i&&i.hasAttribute("data-anno");)M.make(t,i),i=i.parentNode},M={make:function(t,i){const e=i.dataset.anno;if(!e)return;var s=document.getElementById("tooltip");const l=document.createElement("div");if(s){for(const n of s.childNodes)if(n.myTarget===i)return;l.appendChild(document.createElement("hr"))}else s=document.createElement("div"),s.id="tooltip",s.style.top=t.clientY+10+"px",s.style.left=t.clientX+"px",document.body.appendChild(s),l.myTarget=i;l.appendChild(document.createTextNode(e)),l.myTarget=i,s.appendChild(l),i.addEventListener("mouseleave",M.remove,{once:!0}),s.animate([{opacity:0},{opacity:1,easing:"ease-in"}],200)},remove:function(t){const i=document.getElementById("tooltip");if(!i)return;if(i.children.length===1){i.remove();return}const e=t.target;for(const s of i.childNodes)if(s.myTarget===e){s.remove();break}if(i.children.length===1){const s=i.firstChild.firstChild;s.tagName==="HR"&&s.remove()}}};let B=function(){let t=0,i=[];return{set:function(e){return i.push({offset:++t,ptr:e}),i[i.length-1].offset},remove:function(e){i=i.filter(function(l){return l.offset!=e}).splice(0)},closeAllButMe:function(e){i.forEach(function(s){s.offset!=e&&s.ptr.closeOrder()})}}}();function g(t,i){let e=this;if(this.instanceOffset=B.set(e),this.domSelector=t,this.root=document.querySelector(t),this.rootToken=null,this.main,this.button,this.title,this.isMultiple=this.root.hasAttribute("multiple"),this.multipleSize=this.isMultiple&&this.root.hasAttribute("size")?parseInt(this.root.getAttribute("size")):-1,this.isOptgroups=!1,this.currentOptgroup=0,this.drop,this.top,this.left,this.options,this.listElements,this.isDisabled=!1,this.search=!1,this.searchZone=null,this.inputBox=null,this.disabledItems=[],this.ulminWidth=140,this.ulmaxWidth=1/0,this.ulminHeight=25,this.maxOptionWidth=1/0,this.maxSelect=1/0,this.isInitRemote=!1,this.isSearchRemote=!1,this.onInit=null,this.onSearch=null,this.onInitSize=null,this.forbidenAttributes=["class","selected","disabled","data-text","data-value","style"],this.forbidenClasses=["active","disabled"],this.userOptions={maxWidth:500,minWidth:-1,maxHeight:400,translations:{all:"All",item:"item",items:"items",selectAll:"Select All",clearAll:"Clear All"},search:!1,placeHolder:"",stayOpen:!1,disableSelectAll:!1,buttonItemsSeparator:","},this.keepInlineStyles=!1,this.keepInlineCaretStyles=!0,i){if(i.itemsSeparator!=null&&(this.userOptions.buttonItemsSeparator=i.itemsSeparator),i.maxWidth!=null&&(this.userOptions.maxWidth=i.maxWidth),i.minWidth!=null&&(this.userOptions.minWidth=i.minWidth),i.maxHeight!=null&&(this.userOptions.maxHeight=i.maxHeight),i.translations!=null)for(var s in i.translations)i.translations.hasOwnProperty(s)&&this.userOptions.translations[s]&&(this.userOptions.translations[s]=i.translations[s]);i.placeHolder!=null&&(this.userOptions.placeHolder=i.placeHolder),i.search!=null&&(this.search=i.search),i.remote!=null&&i.remote&&(i.remote.onInit!=null&&typeof i.remote.onInit=="function"&&(this.onInit=i.remote.onInit,this.isInitRemote=!0),i.remote.onInitSize!=null&&(this.onInitSize=i.remote.onInitSize,this.onInitSize<3&&(this.onInitSize=3)),i.remote.onSearch!=null&&typeof i.remote.onSearch=="function"&&(this.onSearch=i.remote.onSearch,this.isSearchRemote=!0)),i.stayOpen!=null&&(this.userOptions.stayOpen=i.stayOpen),i.disableSelectAll!=null&&(this.userOptions.disableSelectAll=i.disableSelectAll),i.maxSelect!=null&&!isNaN(i.maxSelect)&&i.maxSelect>=1&&(this.maxSelect=i.maxSelect,this.userOptions.disableSelectAll=!0),i.maxOptionWidth!=null&&!isNaN(i.maxOptionWidth)&&i.maxOptionWidth>=20&&(this.maxOptionWidth=i.maxOptionWidth,this.ulminWidth=i.maxOptionWidth+60,this.ulmaxWidth=i.maxOptionWidth+60),i.keepInlineStyles!=null&&(this.keepInlineStyles=i.keepInlineStyles),i.keepInlineCaretStyles!=null&&(this.keepInlineCaretStyles=i.keepInlineCaretStyles)}this.closeOrder=function(){let l=this;l.userOptions.stayOpen||(l.drop.style.visibility="hidden",l.search&&(l.inputBox.value="",Array.prototype.slice.call(l.listElements).forEach(function(n){n.classList.remove("hide")})))},this.getCssArray=function(l){let n=[];return l===".vsb-main button"&&(n=[{key:"min-width",value:"120px"},{key:"border-radius",value:"0"},{key:"width",value:"100%"},{key:"text-align",value:"left"},{key:"z-index",value:"1"},{key:"color",value:"#333"},{key:"background",value:"white !important"},{key:"border",value:"1px solid #999 !important"},{key:"line-height",value:"20px"},{key:"font-size",value:"14px"},{key:"padding",value:"6px 12px"}]),a(n);function a(r){let o="";return r.forEach(function(v){o+=v.key+":"+v.value+";"}),o}},this.init=function(){let l=this;l.isInitRemote?l.onInit("",l.onInitSize).then(function(n){l.buildSelect(n),l.createTree()}):l.createTree()},this.getResult=function(){let l=this,n=[];return l.root.querySelectorAll("option").forEach(function(r){r.selected&&n.push(r.value)}),n},this.createTree=function(){this.rootToken=e.domSelector.replace(/[^A-Za-z0-9]+/,""),this.root.style.display="none";let l=document.getElementById("btn-group-"+this.rootToken);if(l&&l.remove(),this.main=document.createElement("div"),this.root.parentNode.insertBefore(this.main,this.root.nextSibling),this.main.classList.add("vsb-main"),this.main.setAttribute("id","btn-group-"+this.rootToken),this.main.style.marginLeft=this.main.style.marginLeft,e.userOptions.stayOpen&&(this.main.style.minHeight=this.userOptions.maxHeight+10+"px"),e.userOptions.stayOpen)this.button=document.createElement("div");else if(this.button=document.createElement("button"),this.keepInlineStyles){var n=e.getCssArray(".vsb-main button");this.button.setAttribute("style",n)}this.button.style.maxWidth=this.userOptions.maxWidth+"px",this.userOptions.minWidth!==-1&&(this.button.style.minWidth=this.userOptions.minWidth+"px"),this.main.appendChild(this.button),this.title=document.createElement("span"),this.button.appendChild(this.title),this.title.classList.add("title");let a=document.createElement("span");if(this.button.appendChild(a),a.classList.add("caret"),this.keepInlineCaretStyles&&(a.style.position="absolute",a.style.right="8px",a.style.marginTop="8px"),e.userOptions.stayOpen&&(a.style.display="none",this.title.style.paddingLeft="20px",this.title.style.fontStyle="italic",this.title.style.verticalAlign="20%"),this.drop=document.createElement("div"),this.main.appendChild(this.drop),this.drop.classList.add("vsb-menu"),this.drop.style.zIndex=2e3-this.instanceOffset,this.ul=document.createElement("ul"),this.drop.appendChild(this.ul),this.ul.style.maxHeight=this.userOptions.maxHeight+"px",this.ul.style.minWidth=this.ulminWidth+"px",this.ul.style.maxWidth=this.ulmaxWidth+"px",this.ul.style.minHeight=this.ulminHeight+"px",this.isMultiple&&(this.ul.classList.add("multi"),!e.userOptions.disableSelectAll)){let c=document.createElement("option");c.setAttribute("value","all"),c.innerText=e.userOptions.translations.selectAll,this.root.insertBefore(c,this.root.hasChildNodes()?this.root.childNodes[0]:null)}let r="",o="",v=0;if(this.search){this.searchZone=document.createElement("div"),this.ul.appendChild(this.searchZone),this.searchZone.classList.add("vsb-js-search-zone"),this.searchZone.style.zIndex=2001-this.instanceOffset,this.inputBox=document.createElement("input"),this.searchZone.appendChild(this.inputBox),this.inputBox.setAttribute("type","text"),this.inputBox.setAttribute("id","search_"+this.rootToken),this.maxOptionWidth<1/0&&(this.searchZone.style.maxWidth=e.maxOptionWidth+30+"px",this.inputBox.style.maxWidth=e.maxOptionWidth+30+"px");var E=document.createElement("p");this.ul.appendChild(E),E.style.fontSize="12px",E.innerHTML="&nbsp;",this.ul.addEventListener("scroll",function(c){var y=this.scrollTop;e.searchZone.parentNode.style.top=y+"px"})}if(this.options=document.querySelectorAll(this.domSelector+" > option"),Array.prototype.slice.call(this.options).forEach(function(c){let y=c.textContent,f=c.value,d;c.hasAttributes()&&(d=Array.prototype.slice.call(c.attributes).filter(function(h){return e.forbidenAttributes.indexOf(h.name)===-1}));let b=c.getAttribute("class");b?b=b.split(" ").filter(function(h){return e.forbidenClasses.indexOf(h)===-1}):b=[];let p=document.createElement("li"),u=c.hasAttribute("selected"),m=c.hasAttribute("disabled");e.ul.appendChild(p),p.setAttribute("data-value",f),p.setAttribute("data-text",y),d!==void 0&&d.forEach(function(h){p.setAttribute(h.name,h.value)}),b.forEach(function(h){p.classList.add(h)}),e.maxOptionWidth<1/0&&(p.classList.add("short"),p.style.maxWidth=e.maxOptionWidth+"px"),u&&(v++,r+=o+y,o=e.userOptions.buttonItemsSeparator,p.classList.add("active"),e.isMultiple||(e.title.textContent=y,b.length!=0&&b.forEach(function(h){e.title.classList.add(h)}))),m&&p.classList.add("disabled"),p.appendChild(document.createTextNode(" "+y))}),document.querySelector(e.domSelector+" optgroup")!==null){e.isOptgroups=!0,e.options=document.querySelectorAll(e.domSelector+" option");let c=document.querySelectorAll(e.domSelector+" optgroup");Array.prototype.slice.call(c).forEach(function(y){let f=y.querySelectorAll("option"),d=document.createElement("li"),b=document.createElement("span"),p=document.createElement("i"),u=document.createElement("b"),m=y.getAttribute("data-way");m||(m="closed"),(!m||m!=="closed"&&m!=="open")&&(m="closed"),d.appendChild(b),d.appendChild(p),e.ul.appendChild(d),d.classList.add("grouped-option"),d.classList.add(m),e.currentOptgroup++;let h=e.rootToken+"-opt-"+e.currentOptgroup;d.id=h,d.appendChild(u),u.appendChild(document.createTextNode(y.label)),d.setAttribute("data-text",y.label),e.ul.appendChild(d),Array.prototype.slice.call(f).forEach(function(k){let S=k.textContent,T=k.value,A=k.getAttribute("class");A?A=A.split(" "):A=[],A.push(m);let I=document.createElement("li"),D=k.hasAttribute("selected");e.ul.appendChild(I),I.setAttribute("data-value",T),I.setAttribute("data-text",S),I.setAttribute("data-parent",h),A.length!=0&&A.forEach(function(_){I.classList.add(_)}),D&&(v++,r+=o+S,o=e.userOptions.buttonItemsSeparator,I.classList.add("active"),e.isMultiple||(e.title.textContent=S,A.length!=0&&A.forEach(function(_){e.title.classList.add(_)}))),I.appendChild(document.createTextNode(S))})})}if(e.options.length-Number(!e.userOptions.disableSelectAll)==v)r=e.userOptions.translations.all;else if(e.multipleSize!=-1&&v>e.multipleSize){let c=v===1?e.userOptions.translations.item:e.userOptions.translations.items;r=v+" "+c}e.isMultiple&&(e.title.innerHTML=r),e.userOptions.placeHolder!=""&&e.title.textContent==""&&(e.title.textContent=e.userOptions.placeHolder),e.listElements=e.drop.querySelectorAll("li:not(.grouped-option)"),e.search&&e.inputBox.addEventListener("keyup",function(c){let y=c.target.value.toUpperCase(),f=y.length,d=0,b=0,p=null;e.isSearchRemote?f==0?e.remoteSearchIntegrate(null):f>=3&&e.onSearch(y).then(function(u){e.remoteSearchIntegrate(u)}):(f<3?Array.prototype.slice.call(e.listElements).forEach(function(u){u.getAttribute("data-value")==="all"?p=u:(u.classList.remove("hidden-search"),d++,b+=u.classList.contains("active"))}):Array.prototype.slice.call(e.listElements).forEach(function(u){u.getAttribute("data-value")!=="all"?u.getAttribute("data-text").toUpperCase().indexOf(y)===-1&&u.getAttribute("data-value")!=="all"?u.classList.add("hidden-search"):(d++,u.classList.remove("hidden-search"),b+=u.classList.contains("active")):p=u}),p&&(d===0?p.classList.add("disabled"):p.classList.remove("disabled"),b!==d?(p.classList.remove("active"),p.innerText=e.userOptions.translations.selectAll,p.setAttribute("data-selected","false")):(p.classList.add("active"),p.innerText=e.userOptions.translations.clearAll,p.setAttribute("data-selected","true"))))}),e.userOptions.stayOpen?(e.drop.style.visibility="visible",e.drop.style.boxShadow="none",e.drop.style.minHeight=this.userOptions.maxHeight+10+"px",e.drop.style.position="relative",e.drop.style.left="0px",e.drop.style.top="0px",e.button.style.border="none"):this.main.addEventListener("click",function(c){e.isDisabled||(e.drop.style.visibility="visible",document.addEventListener("click",L),c.preventDefault(),c.stopPropagation(),e.userOptions.stayOpen||B.closeAllButMe(e.instanceOffset))}),this.drop.addEventListener("click",function(c){if(e.isDisabled||c.target.tagName==="INPUT")return;let y=c.target.tagName==="SPAN",f=c.target.tagName==="I",d=c.target.parentElement;if(!d.hasAttribute("data-value")&&d.classList.contains("grouped-option")){if(!y&&!f)return;let m,h;f?e.checkUncheckFromParent(d):(d.classList.contains("open")?(m="open",h="closed"):(m="closed",h="open"),d.classList.remove(m),d.classList.add(h),e.drop.querySelectorAll("[data-parent='"+d.id+"']").forEach(function(S){S.classList.remove(m),S.classList.add(h)}));return}let b=c.target.getAttribute("data-value"),p=c.target.getAttribute("data-text"),u=c.target.getAttribute("class");if(!(u&&u.indexOf("disabled")!=-1)&&!(u&&u.indexOf("overflow")!=-1)){if(b==="all"){c.target.hasAttribute("data-selected")&&c.target.getAttribute("data-selected")==="true"?e.setValue("none"):e.setValue("all");return}if(!e.isMultiple)e.root.value=b,e.title.textContent=p,u?e.title.setAttribute("class",u+" title"):e.title.setAttribute("class","title"),Array.prototype.slice.call(e.listElements).forEach(function(m){m.classList.remove("active")}),p!=""&&c.target.classList.add("active"),e.privateSendChange(),e.userOptions.stayOpen||L();else{let m=!1;u&&(m=u.indexOf("active")!=-1),m?c.target.classList.remove("active"):c.target.classList.add("active"),c.target.hasAttribute("data-parent")&&e.checkUncheckFromChild(c.target);let h="",k="",S=0,T=0;for(let A=0;A<e.options.length;A++)T++,e.options[A].value==b&&(e.options[A].selected=!m),e.options[A].selected&&(S++,h+=k+e.options[A].textContent,k=e.userOptions.buttonItemsSeparator);if(T==S-Number(!e.userOptions.disableSelectAll))h=e.userOptions.translations.all;else if(e.multipleSize!=-1&&S>e.multipleSize){let A=S===1?e.userOptions.translations.item:e.userOptions.translations.items;h=S+" "+A}e.title.textContent=h,e.checkSelectMax(S),e.checkUncheckAll(),e.privateSendChange()}c.preventDefault(),c.stopPropagation(),e.userOptions.placeHolder!=""&&e.title.textContent==""&&(e.title.textContent=e.userOptions.placeHolder)}});function L(){document.removeEventListener("click",L),e.drop.style.visibility="hidden",e.search&&(e.inputBox.value="",Array.prototype.slice.call(e.listElements).forEach(function(c){c.classList.remove("hidden-search")}))}},this.init(),this.checkUncheckAll()}g.prototype.buildSelect=function(t){let i=this;if(!(t==null||t.length<1))if(i.isOptgroups||(i.isOptgroups=t[0].parent!=null&&t[0].parent!=""),i.isOptgroups){let e={};t=t.filter(function(s){return s.parent!=null&&s.parent!=""}),t.forEach(function(s){e[s.parent]||(e[s.parent]=!0)});for(let s in e){let l=document.createElement("optgroup");l.setAttribute("label",s),options=t.filter(function(n){return n.parent==s}),options.forEach(function(n){let a=document.createElement("option");a.value=n.value,a.text=n.text,n.selected&&a.setAttribute("selected",!0),l.appendChild(a)}),i.root.appendChild(l)}}else t.forEach(function(e){let s=document.createElement("option");s.value=e.value,s.text=e.text,e.selected&&s.setAttribute("selected",!0),i.root.appendChild(s)})};g.prototype.remoteSearchIntegrate=function(t){let i=this;if(t==null||t.length==0){let s=i.optionsCheckedToData();s&&(t=s.slice(0)),i.remoteSearchIntegrateIt(t)}else{let s=i.optionsCheckedToData();if(s.length>0)for(var e=t.length-1;e>=0;e--)s.indexOf(t[e].id)!=-1&&t.slice(e,1);t=t.concat(s),i.remoteSearchIntegrateIt(t)}};g.prototype.optionsCheckedToData=function(){let t=this,i=[],e=t.ul.querySelectorAll("li.active:not(.grouped-option)"),s={};return e&&Array.prototype.slice.call(e).forEach(function(l){let n={value:l.getAttribute("data-value"),text:l.getAttribute("data-text"),selected:!0};if(n.value!=="all"){if(t.isOptgroups){let a=l.getAttribute("data-parent");if(s[a]!=null)n.parent=s[a];else{let o=t.ul.querySelector("#"+a).getAttribute("data-text");s[a]=o,n.parent=o}}i.push(n)}}),i};g.prototype.removeOptionsNotChecked=function(t){let i=this,e=i.onInitSize,s=t==null?0:t.length,l=i.root.length;if(l+s>e){let a=l+s-e-1,r=0;for(var n=i.root.length-1;n>=0;n--)i.root.options[n].selected==!1&&r<=a&&(r++,i.root.remove(n))}};g.prototype.changeTree=function(t,i){let e=this;e.empty(),e.remoteSearchIntegrateIt(t),i&&i.onSearch&&typeof i.onSearch=="function"&&(e.onSearch=i.onSearch,e.isSearchRemote=!0),e.listElements=this.drop.querySelectorAll("li:not(.grouped-option)")};g.prototype.remoteSearchIntegrateIt=function(t){let i=this;if(!(t==null||t.length==0)){for(;i.root.firstChild;)i.root.removeChild(i.root.firstChild);i.buildSelect(t),i.reloadTree()}};g.prototype.reloadTree=function(){let t=this,i=t.ul.querySelectorAll("li");if(i!=null)for(var e=i.length-1;e>=0;e--)i[e].getAttribute("data-value")!=="all"&&t.ul.removeChild(i[e]);if(t.isOptgroups){if(document.querySelector(t.domSelector+" optgroup")!==null){t.options=document.querySelectorAll(this.domSelector+" option");let s=document.querySelectorAll(this.domSelector+" optgroup");Array.prototype.slice.call(s).forEach(function(l){let n=l.querySelectorAll("option"),a=document.createElement("li"),r=document.createElement("span"),o=document.createElement("i"),v=document.createElement("b"),E=l.getAttribute("data-way");E||(E="closed"),(!E||E!=="closed"&&E!=="open")&&(E="closed"),a.appendChild(r),a.appendChild(o),t.ul.appendChild(a),a.classList.add("grouped-option"),a.classList.add(E),t.currentOptgroup++;let x=t.rootToken+"-opt-"+t.currentOptgroup;a.id=x,a.appendChild(v),v.appendChild(document.createTextNode(l.label)),a.setAttribute("data-text",l.label),t.ul.appendChild(a),Array.prototype.slice.call(n).forEach(function(L){let c=L.textContent,y=L.value,f=L.getAttribute("class");f?f=f.split(" "):f=[],f.push(E);let d=document.createElement("li"),b=L.hasAttribute("selected");t.ul.appendChild(d),d.setAttribute("data-value",y),d.setAttribute("data-text",c),d.setAttribute("data-parent",x),f.length!=0&&f.forEach(function(p){d.classList.add(p)}),b&&(t.userOptions.buttonItemsSeparator,d.classList.add("active"),t.isMultiple||(t.title.textContent=c,f.length!=0&&f.forEach(function(p){t.title.classList.add(p)}))),d.appendChild(document.createTextNode(c))})})}t.listElements=this.drop.querySelectorAll("li:not(.grouped-option)")}else t.options=t.root.querySelectorAll("option"),Array.prototype.slice.call(t.options).forEach(function(s){let l=s.textContent,n=s.value;if(n!="all"){let a;s.hasAttributes()&&(a=Array.prototype.slice.call(s.attributes).filter(function(x){return t.forbidenAttributes.indexOf(x.name)===-1}));let r=s.getAttribute("class");r?r=r.split(" ").filter(function(x){return t.forbidenClasses.indexOf(x)===-1}):r=[];let o=document.createElement("li"),v=s.hasAttribute("selected"),E=s.disabled;t.ul.appendChild(o),o.setAttribute("data-value",n),o.setAttribute("data-text",l),a!==void 0&&a.forEach(function(x){o.setAttribute(x.name,x.value)}),r.forEach(function(x){o.classList.add(x)}),t.maxOptionWidth<1/0&&(o.classList.add("short"),o.style.maxWidth=t.maxOptionWidth+"px"),v&&(t.userOptions.buttonItemsSeparator,o.classList.add("active"),t.isMultiple||(t.title.textContent=l,r.length!=0&&r.forEach(function(x){t.title.classList.add(x)}))),E&&o.classList.add("disabled"),o.appendChild(document.createTextNode(" "+l))}})};g.prototype.disableItems=function(t){let i=this,e=[];w(t)=="string"&&(t=t.split(",")),w(t)=="array"&&Array.prototype.slice.call(i.options).forEach(function(s){t.indexOf(s.value)!=-1&&(e.push(s.value),s.setAttribute("disabled",""))}),Array.prototype.slice.call(i.listElements).forEach(function(s){let l=s.getAttribute("data-value");e.indexOf(l)!=-1&&s.classList.add("disabled")})};g.prototype.enableItems=function(t){let i=this,e=[];w(t)=="string"&&(t=t.split(",")),w(t)=="array"&&Array.prototype.slice.call(i.options).forEach(function(s){t.indexOf(s.value)!=-1&&(e.push(s.value),s.removeAttribute("disabled"))}),Array.prototype.slice.call(i.listElements).forEach(function(s){e.indexOf(s.getAttribute("data-value"))!=-1&&s.classList.remove("disabled")})};g.prototype.checkSelectMax=function(t){let i=this;i.maxSelect==1/0||!i.isMultiple||(i.maxSelect<=t?Array.prototype.slice.call(i.listElements).forEach(function(e){e.hasAttribute("data-value")&&!e.classList.contains("disabled")&&!e.classList.contains("active")&&e.classList.add("overflow")}):Array.prototype.slice.call(i.listElements).forEach(function(e){e.classList.contains("overflow")&&e.classList.remove("overflow")}))};g.prototype.checkUncheckFromChild=function(t){let i=this,e=t.getAttribute("data-parent"),s=document.getElementById(e);if(!i.isMultiple)return;let l=i.drop.querySelectorAll("li"),n=Array.prototype.slice.call(l).filter(function(o){return o.hasAttribute("data-parent")&&o.getAttribute("data-parent")==e&&!o.classList.contains("hidden-search")}),a=0,r=n.length;r!=0&&(n.forEach(function(o){o.classList.contains("active")&&a++}),a===r||a===0?a===0?s.classList.remove("checked"):s.classList.add("checked"):s.classList.remove("checked"))};g.prototype.checkUncheckFromParent=function(t){let i=this,e=t.id;if(!i.isMultiple)return;let s=i.drop.querySelectorAll("li"),l=Array.prototype.slice.call(s).filter(function(r){return r.hasAttribute("data-parent")&&r.getAttribute("data-parent")==e&&!r.classList.contains("hidden-search")}),n=0,a=l.length;a!=0&&(l.forEach(function(r){r.classList.contains("active")&&n++}),n===a||n===0?(l.forEach(function(r){var o=document.createEvent("HTMLEvents");o.initEvent("click",!0,!1),r.dispatchEvent(o)}),n===0?t.classList.add("checked"):t.classList.remove("checked")):(t.classList.remove("checked"),l.forEach(function(r){if(!r.classList.contains("active")){var o=document.createEvent("HTMLEvents");o.initEvent("click",!0,!1),r.dispatchEvent(o)}})))};g.prototype.checkUncheckAll=function(){let t=this;if(!t.isMultiple)return;let i=0,e=0,s=0,l=null;t.listElements!=null&&(Array.prototype.slice.call(t.listElements).forEach(function(n){n.hasAttribute("data-value")&&(n.getAttribute("data-value")==="all"&&(l=n),n.getAttribute("data-value")!=="all"&&!n.classList.contains("hidden-search")&&!n.classList.contains("disabled")&&(e++,i+=n.classList.contains("active")),n.getAttribute("data-value")!=="all"&&!n.classList.contains("disabled")&&s++)}),l&&(i===e?(i===s&&(t.title.textContent=t.userOptions.translations.all),l.classList.add("active"),l.innerText=t.userOptions.translations.clearAll,l.setAttribute("data-selected","true")):i===0&&(t.title.textContent=t.userOptions.placeHolder,l.classList.remove("active"),l.innerText=t.userOptions.translations.selectAll,l.setAttribute("data-selected","false"))))};g.prototype.setValue=function(t){let i=this,e=i.drop.querySelectorAll("li");if(t==null||t==null||t=="")i.empty();else if(i.isMultiple){w(t)=="string"&&(t==="all"?(t=[],Array.prototype.slice.call(e).forEach(function(l){if(l.hasAttribute("data-value")){let n=l.getAttribute("data-value");n!=="all"?(!l.classList.contains("hidden-search")&&!l.classList.contains("disabled")&&t.push(l.getAttribute("data-value")),l.classList.contains("active")&&(l.classList.contains("hidden-search")||l.classList.contains("disabled"))&&t.push(n)):l.classList.add("active")}else l.classList.contains("grouped-option")&&l.classList.add("checked")})):t==="none"?(t=[],Array.prototype.slice.call(e).forEach(function(l){if(l.hasAttribute("data-value")){let n=l.getAttribute("data-value");n!=="all"&&l.classList.contains("active")&&(l.classList.contains("hidden-search")||l.classList.contains("disabled"))&&t.push(n)}else l.classList.contains("grouped-option")&&l.classList.remove("checked")})):t=t.split(","));let s=[];if(w(t)=="array"){Array.prototype.slice.call(i.options).forEach(function(o){t.indexOf(o.value)!==-1?(o.selected=!0,s.push(o.value)):o.selected=!1});let l="",n="",a=0,r=0;if(Array.prototype.slice.call(e).forEach(function(o){o.value!=="all"&&r++,s.indexOf(o.getAttribute("data-value"))!=-1?(o.classList.add("active"),a++,l+=n+o.getAttribute("data-text"),n=i.userOptions.buttonItemsSeparator):o.classList.remove("active")}),r==a-Number(!i.userOptions.disableSelectAll))l=i.userOptions.translations.all;else if(i.multipleSize!=-1&&a>i.multipleSize){let o=a===1?i.userOptions.translations.item:i.userOptions.translations.items;l=a+" "+o}i.title.textContent=l,i.privateSendChange()}i.checkUncheckAll()}else{let s=!1,l="";Array.prototype.slice.call(e).forEach(function(n){n.getAttribute("data-value")==t?(n.classList.add("active"),s=!0,l=n.getAttribute("data-text")):n.classList.remove("active")}),Array.prototype.slice.call(i.options).forEach(function(n){n.value==t?(n.selected=!0,className=n.getAttribute("class"),className||(className="")):n.selected=!1}),s&&(i.title.textContent=l,i.userOptions.placeHolder!=""&&i.title.textContent==""&&(i.title.textContent=i.userOptions.placeHolder),className!=""?i.title.setAttribute("class",className+" title"):i.title.setAttribute("class","title"))}};g.prototype.privateSendChange=function(){let t=document.createEvent("HTMLEvents");t.initEvent("change",!0,!1),this.root.dispatchEvent(t)};g.prototype.empty=function(){Array.prototype.slice.call(this.listElements).forEach(function(i){i.classList.remove("active")});let t=this.drop.querySelectorAll("li.grouped-option");t&&Array.prototype.slice.call(t).forEach(function(i){i.classList.remove("checked")}),Array.prototype.slice.call(this.options).forEach(function(i){i.selected=!1}),this.title.textContent="",this.userOptions.placeHolder!=""&&this.title.textContent==""&&(this.title.textContent=this.userOptions.placeHolder),this.checkUncheckAll(),this.privateSendChange()};g.prototype.destroy=function(){let t=document.getElementById("btn-group-"+this.rootToken);t&&(B.remove(this.instanceOffset),t.remove(),this.root.style.display="inline-block")};g.prototype.disable=function(){this.main.addEventListener("click",function(i){i.preventDefault(),i.stopPropagation()});let t=document.getElementById("btn-group-"+this.rootToken);t&&(button=t.querySelector("button"),button&&button.classList.add("disabled"),this.isDisabled=!0)};g.prototype.enable=function(){let t=document.getElementById("btn-group-"+this.rootToken);t&&(button=t.querySelector("button"),button&&button.classList.remove("disabled"),this.isDisabled=!1)};g.prototype.showOptions=function(){console.log(this.userOptions)};"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});function w(t){return Object.prototype.toString.call(t).replace("[object ","").replace("]","").toLowerCase()}const N=new Map([["shelfmark",{title:"shelfmark",type:"shelfmark",sql:"mss.filename, shelfmark",post:t=>`<a href="/mss/${t.filename}" class="shelfmark">${t.shelfmark}</a>`}],["repository",{sql:"repository",title:"repository"}],["title",{sql:"title",title:"title",type:"tamil",post:t=>O(t.title)}],["languages",{sql:"languages",title:"languages"}],["material",{sql:"material",title:"material"}],["width",{sql:"width",title:"width"}],["height",{sql:"height",title:"height"}],["extent",{sql:"extent",title:"extent",type:"extent"}],["date",{sql:"date",title:"date",type:"daterange"}],["images",{sql:"images",title:"images",post:t=>t.images?`<span class="smallcaps">${t.images}</span>`:""}],["blessing",{sql:"paratexts_blessing.text AS blessing",title:"blessing",table:"paratexts_blessing",type:"tamil",post:t=>O(t.blessing)}],["colophon",{sql:"paratexts_colophon.text AS colophon",title:"colophon",table:"paratexts_colophon",type:"tamil",post:t=>O(t.colophon)}],["header",{sql:"paratexts_header.text AS header",title:"header",table:"paratexts_header",type:"tamil",post:t=>O(t.header)}],["invocation",{sql:"paratexts_invocation.text AS invocation",title:"invocation",table:"paratexts_invocation",type:"tamil",post:t=>O(t.invocation)}],["ownership-statement",{sql:"[paratexts_ownership-statement].text AS [ownership-statement]",title:"ownership statement",table:"[paratexts_ownership-statement]",type:"tamil",post:t=>O(t["ownership-statement"])}],["satellite-stanza",{sql:"[paratexts_satellite-stanza].text AS [satellite-stanza]",title:"satellite stanza",table:"[paratexts_satellite-stanza]",type:"tamil",post:t=>O(t["satellite-stanza"])}],["table-of-contents",{sql:"[paratexts_table-of-contents].text AS [table-of-contents]",title:"table of contents",table:"[paratexts_table-of-contents]",type:"tamil",post:t=>O(t["table-of-contents"])}],["paratext_title",{sql:"paratexts_title.text AS paratext_title",title:"title",table:"[paratexts_title]",type:"tamil",post:t=>O(t.paratext_title)}],["tbc",{sql:"paratexts_TBC.text AS [tbc]",title:"TBC",table:"[paratexts_TBC]",type:"tamil",post:t=>O(t.tbc)}],["g_below-base",{sql:"[g_below-base].context AS [g_below-base], [g_below-base].text as [g_below-base_sort]",title:"ligature",searchcolumn:"[g_below-base].text",table:"[g_below-base]",type:"tamil",render:{_:"display",sort:"sort"},post:t=>({display:O(t["g_below-base"]),sort:t["g_below-base_sort"]})}],["g_post-base",{sql:"[g_post-base].context AS [g_post-base], [g_post-base].text as [g_post-base_sort]",title:"ligature",searchcolumn:"[g_below-base].text",table:"[g_post-base]",type:"tamil",render:{_:"display",sort:"sort"},post:t=>({display:O(t["g_post-base"]),sort:t["g_post-base_sort"]})}],["synch",{sql:"synch",title:"unit"}],["milestone",{sql:"milestone, facs",title:"page/folio",post:t=>t.milestone&&t.facs?`<a href="/mss/${t.filename}?facs=${t.facs}">${t.milestone}</a>`:t.milestone}],["placement",{sql:"placement",title:"placement"}]]),V=["Ancien fonds","Ariel","w/d","Burnouf","Cordier","Ducler","Haas","Reydellet","Vinson"];for(const t of V)N.set(`old_shelfmarks(${t})`,{title:"old shelfmark",type:"shelfmark",sql:`json_extract(old_shelfmarks, '$.${t}') AS 'old_shelfmarks(${t})'`});const j=async t=>{const i=await $("/mss/db/meta.db"),e=["shelfmark","repository","title","languages","material","extent","date","images"],s=[],l=[],n=t.dataset.sqlcolumns,a=n?n.split(", "):e,r=[];let o="DISTINCT";for(const p of a){const u=N.get(p);u&&(r.push(u.sql),u.table&&(s.push(`INNER JOIN ${u.table} ON ${u.table}.filename = mss.filename`),o=""))}const v=t.dataset.collection;v&&(s.push("INNER JOIN collections ON collections.filename = mss.filename"),l.push(`collections.collection = "${v}"`));const E=t.dataset.repository;E&&l.push(`mss.repository = "${E}"`);const x=t.dataset.collector;x&&(s.push("INNER JOIN persons ON persons.filename = mss.filename"),l.push(`persons.persname = "${x}" AND persons.role = "collector"`));const L=t.dataset.persons;L&&(s.push("INNER JOIN persons ON persons.filename = mss.filename"),l.push(`persons.persname IN (${L}) AND persons.role != ""`));const c=t.dataset.searchtext;c&&l.push(`${t.dataset.searchcolumn} LIKE ${c}`);const y=r.join(", ")+" ",f=s.join(" "),d=l.length>0?`WHERE ${l.join(" AND ")}`:"",b=await i.db.query(`SELECT ${o} ${y} FROM mss ${f} ${d} ORDER BY mss.filename`);return U(b,a)},U=(t,i)=>{const e=t.map(n=>{const a={};for(const r of i){const o=N.get(r);o?a[r]=o.post?o.post(n)||"":n[r]:a[r]=n[r]||""}return a}),s=i.map(n=>{const a=N.get(n),r={data:n,title:a.title,name:n};return a.type&&(r.type=a.type),a.render&&(r.render=a.render),r}),l=t.map(n=>`"${n.filename}"`).join(", ");return{rows:e,columns:s,files:l}},W=(t,i)=>{const e=i.target.dataset.name;if(!e)return;const s=t.column(`${e}:name`);s.search()!==i.target.value&&s.search(i.target.value).draw()},Z=(t,i)=>{const e=new C(`#${i.id}`,{searchable:!0,language:{search:"Filter:"},paging:!0,pageLength:100,lengthMenu:[[25,50,100,-1],[25,50,100,"All"]],sortable:!0,data:t.rows,columns:t.columns,scrollX:!0}),s=document.createElement("tr");s.id="filter_inputs";for(const a of t.columns){const r=document.createElement("th"),o=document.createElement("input");o.type="text",o.dataset.name=a.name,o.placeholder=`Filter ${a.title}`,o.style.width="100%",r.appendChild(o),s.appendChild(r)}s.style.height="0px",document.querySelector(".dataTables_scrollHead thead").prepend(s),s.addEventListener("keyup",W.bind(null,e)),s.addEventListener("change",W.bind(null,e)),s.addEventListener("clear",W.bind(null,e));const l=document.createElement("button");l.id="filter_button",l.append("↓"),document.getElementById("index_filter").appendChild(l),l.addEventListener("click",a=>{const r=document.getElementById("filter_inputs");if(r.style.height==="0px"){r.style.height="auto";for(const o of r.querySelectorAll("input"))o.style.display="block";a.target.textContent="↑"}else{r.style.height="0px";for(const o of r.querySelectorAll("input"))o.style.display="none";a.target.textContent="↓"}}),document.getElementById("spinner").style.display="none";const n=document.getElementById("tabright");return n&&(n.style.visibility="visible"),document.getElementById("index").style.visibility="visible",i.dataset.files=t.files,i.addEventListener("mouseover",F),e};export{N as a,j as g,Z as m,g as v};
